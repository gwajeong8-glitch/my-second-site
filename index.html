<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>실시간 데이터 현황</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
  /* ───────────────────────────────
     DATA 페이지 전용 배경
  ─────────────────────────────── */
  body.data-page {
    background: url("bak.png") no-repeat center top !important;
    background-size: 1024px 490px !important;
    background-attachment: scroll !important;
    margin: 0;
    padding: 0;
    display: flex;
    color: white;
    font-family: "Noto Sans KR", sans-serif;
  }

  /* 왼쪽 메뉴 */
  .left-menu {
    width: 180px;
    padding: 20px;
    font-size: 18px;
    line-height: 38px;
  }
  .left-menu div {
    cursor: pointer;
    transition: .2s;
  }
  .left-menu div:hover {
    color: #ffd27f;
  }
  .active {
    color: #ffe9ad;
    font-weight: 700;
    text-shadow: 0 0 10px #ffcb62;
  }

  /* 오른쪽 컨텐츠 */
  .content {
    flex: 1;
    padding: 20px 40px;
    text-align: center;
  }

  h1 {
    font-size: 40px;
    margin-bottom: 10px;
  }
  .sub {
    font-size: 18px;
    color: #e0e0e0;
    margin-bottom: 20px;
  }

  /* 데이터 표 */
  table {
    width: 100%;
    max-width: 1100px;
    margin: auto;
    border-collapse: collapse;
    font-size: 20px;
    font-weight: 600;
    text-align: center;
    color: #000;
  }

  thead tr {
    background:#d7f1ff;
    height: 60px;
  }
  tbody tr {
    background:#d8f4d5;
    height: 60px;
  }
  tbody tr:nth-child(even){
    background:#c8edc3;
  }

  td, th {
    border:1px solid #333;
    padding:10px;
  }

  td input {
    width:95%;
    height:38px;
    font-size:18px;
    font-weight:600;
    border:none;
    outline:none;
    background:#fff;
  }

  .gold { color:#ffd27f !important; font-weight:700; }
</style>
</head>

<body class="data-page">

<!-- 왼쪽 메뉴 -->
<div class="left-menu">
  <div>메인 화면</div>
  <div>[매칭/고객 상태]</div>
  <div>주문 상태</div>
  <div>인증 상담</div>
  <div>[상담/문의]</div>
  <div>전국 만남</div>
  <div>[관리/리더]</div>

  <div class="active">실시간 데이터</div>

  <div>[데이터 분석]</div>
  <div>포인트 조회</div>
  <div>유형 선택</div>
  <div>회원 관리</div>
  <div>회원 승인</div>
  <div>회원 등록</div>
  <div>담당 실장</div>
</div>

<!-- 오른쪽 내용 -->
<div class="content">
  <h1>실시간 데이터 현황</h1>

  <div class="sub">
    <br>
    <span class="gold">
      당신의 취향을 공유하며, 뜨거운 교감을 나눌 운명의 파트너.<br>
      은밀한 만남을 통해 최상의 만족감을 경험하세요.
    </span>
  </div>

  <table id="dataTable">
    <thead>
      <tr>
        <th>번호</th>
        <th>선택 유형</th>
        <th>포인트 금액</th>
        <th>환불 금액</th>
        <th>정확도</th>
        <th>데이터 상태</th>
        <th>서비스</th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>1</td>
        <td>선택 가능</td>
        <td>120,000</td>
        <td>250,500</td>
        <td>100%</td>
        <td>정상</td>
        <td style="color:red;">매진</td>
      </tr>

      <tr>
        <td>2</td>
        <td>선택 가능</td>
        <td>230,000</td>
        <td>276,000</td>
        <td>100%</td>
        <td>정상</td>
        <td style="color:red;">매진</td>
      </tr>

      <tr>
        <td>3</td>
        <td>선택 가능</td>
        <td>570,000</td>
        <td>584,000</td>
        <td>100%</td>
        <td>정상</td>
        <td style="color:red;">매진</td>
      </tr>

      <tr>
        <td>4</td>
        <td>선택 가능</td>
        <td>730,000</td>
        <td>876,000</td>
        <td>100%</td>
        <td>정상</td>
        <td style="color:red;">매진</td>
      </tr>
    </tbody>
  </table>
</div>

<!-- 자동 저장 -->
<script>
  const table = document.getElementById("dataTable");
  const STORAGE_KEY = "realtime_table_data_v2";

  function loadSavedData() {
    const saved = localStorage.getItem(STORAGE_KEY);
    if (!saved) return;

    const data = JSON.parse(saved);
    const rows = table.querySelectorAll("tbody tr");

    rows.forEach((row, rIdx) => {
      const cells = row.querySelectorAll("td");
      cells.forEach((cell, cIdx) => {
        if (data[rIdx] && data[rIdx][cIdx] !== undefined) {
          cell.innerText = data[rIdx][cIdx];
        }
      });
    });
  }

  function saveTableData() {
    const rows = table.querySelectorAll("tbody tr");
    let data = [];

    rows.forEach(row => {
      const rowData = [];
      row.querySelectorAll("td").forEach(cell => {
        rowData.push(cell.innerText);
      });
      data.push(rowData);
    });

    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
  }

  document.querySelectorAll("tbody td").forEach(cell => {
    cell.addEventListener("click", function () {
      if (cell.classList.contains("editing")) return;

      const original = cell.innerText;
      cell.classList.add("editing");

      const input = document.createElement("input");
      input.value = original;

      cell.innerHTML = "";
      cell.appendChild(input);
      input.focus();

      const finish = () => {
        cell.classList.remove("editing");
        cell.innerText = input.value;
        saveTableData();
      };

      input.addEventListener("keydown", e => {
        if (e.key === "Enter") finish();
      });
      input.addEventListener("blur", finish);
    });
  });

  loadSavedData();
</script>

</body>
</html>
